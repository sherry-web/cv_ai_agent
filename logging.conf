[loggers]
keys = root, app, gunicorn.error, gunicorn.access

[handlers]
keys = console, error_console, access_console, file_handler

[formatters]
keys = detailed, simple, access, json

[logger_root]
level = INFO
handlers = console
qualname = root
propagate = 0

# Application logger - for Flask app specific logs
[logger_app]
level = INFO
handlers = console
qualname = app
propagate = 0

# Gunicorn error logger - handles server errors
[logger_gunicorn.error]
level = INFO
handlers = error_console
qualname = gunicorn.error
propagate = 0

# Gunicorn access logger - HTTP request logs
[logger_gunicorn.access]
level = INFO
handlers = access_console
qualname = gunicorn.access
propagate = 0

[handler_console]
class = StreamHandler
level = INFO
formatter = detailed
args = (sys.stdout,)

# Separate error stream handler for stderr
[handler_error_console]
class = StreamHandler
level = WARNING
formatter = detailed
args = (sys.stderr,)

# Access log handler (simplified format)
[handler_access_console]
class = StreamHandler
level = INFO
formatter = access
args = (sys.stdout,)

# Optional file handler (commented out by default)
# Enable by adding 'file_handler' to logger handlers
[handler_file_handler]
class = FileHandler
level = INFO
formatter = detailed
args = ('/var/log/cv_ai_agent/app.log', 'a', 'utf-8')

[formatter_detailed]
# Production format: timestamp, level, logger name, module, line number, message
format = %(asctime)s.%(msecs)03d [%(levelname)-8s] %(name)s:%(filename)s:%(lineno)d - %(message)s
datefmt = %Y-%m-%d %H:%M:%S
class = logging.Formatter

[formatter_simple]
# Simplified format for less verbose output
format = [%(levelname)s] %(name)s - %(message)s
datefmt = %H:%M:%S
class = logging.Formatter

[formatter_access]
# Gunicorn access log format (Common Log Format with timing)
# Remote host, remote user, timestamp, request line, status code, response size, referer, user agent, request time
format = %(message)s
class = logging.Formatter

[formatter_json]
# JSON format for structured logging (compatible with log aggregators)
# Requires Python 3.2+ and optional json_log_formatter package for best results
format = {"timestamp": "%(asctime)s", "level": "%(levelname)s", "logger": "%(name)s", "message": "%(message)s", "module": "%(module)s", "function": "%(funcName)s"}
datefmt = %Y-%m-%dT%H:%M:%S
class = logging.Formatter